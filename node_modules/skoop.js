var Skoop = function(user, properties) {
	// data members
	this._id = null;   			// hex string of mongo _id
	this.created = null			// timestamp of skoop creation
	this.updated = null			// timestamp of last update
	this.user = user + '';		// string email of user who created the skoop
	this.label = null;			// string user assigned label
	this.url = null;				// the url of the product for the skoop if any
	this.members = [];			// array of emails of users who have joined the Skoop
	this.vendor = null;			// string identifier for vendor
	this.category = null;		// string category name
	this.product = null;			// string product name
	this.price = null;         // float the listed price of the product
	this.image = null;			// string the url of the image for the skoop
	this.terms = null;			// object containing skoop terms
	this.location = null;		// shapefile, string id?
	this.action = null;			// string placeholder for automatic processing
	this.coupon = null;			// coupon code or coupon url
	this.granted = false;		// boolean indicates if the skoop is granted
	this.active = true;			// boolean indicates if the skoop is active
	this.dateToExpire = null;	// timestamp date to expire the Skoop
	this.tags = [];				// array of string tags on skoop
	this.error = null;			// string error message
	this.featured = false;		// boolean indicates it is a featured skoop

	// accessor: valid
	Object.defineProperty(this, 'valid', {value: function() {
		if (!this.user) {
			this.error = "No user provided.";
			return false;
		}

		if (!(this.category || this.product)) {
			this.error = "Either a product or category must be provided.";
			return false;
		}

		return true;
	}, enumerable : false, configurable : true});

	// accessor: new
	Object.defineProperty(this, 'new', {value: function() {
		if (!this._id)
			return true;
		else
			return false;
	}, enumerable: false, configurable: true});

	if (typeof properties === "object") {
		this._id = properties['_id'] != null ? properties['_id'] : null;
		this.active = properties['active'] != null ? properties['active'] : true;
		this.created = properties['created'] != null ? properties['created'] : Date.now();
		this.update = properties['updated'] != null ? properties['updated'] : Date.now();
		this.vendor = properties['vendor'] != null ? properties['vendor'] + '' : null;
		this.members = properties['members'] != null ? properties['members'] : [];
		this.category = properties['category'] != null ? properties['category'] + '' : null;
		this.product = properties['product'] != null ? properties['product'] + '' : null;
		this.price = properties['price'] != null ? properties['price'] : null;
		this.image = properties['image'] != null ? properties['image'] + '' : null;
		this.timeFrame = properties['timeFrame'] != null ? properties['timeFrame'] : null;
		this.terms = properties['terms'] != null ? properties['terms'] : null;
		this.location = properties['location'] != null ? properties['location'] : null;
		this.action = properties['action'] != null ? properties['action'] + '' : null;
		this.coupon = properties['coupon'] != null ? properties['coupon'] + '' : null;
		this.tags = properties['tags'] != null ? properties['tags'] : [];
		this.featured = properties['featured'] != null ? properties['featured'] : null;
		this.granted = properties['granted'] != null ? properties['granted'] : null;
		this.dateToExpire = properties['dateToExpire'] != null ? properties['dateToExpire'] : null;
		this.url = properties['url'] != null ? properties['url'] : null;
	}
};

exports.Skoop = Skoop;
